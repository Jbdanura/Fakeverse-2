(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[381],{1197:(e,a,s)=>{Promise.resolve().then(s.bind(s,8043))},8043:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>A});var t=s(5155),l=s(3628),n=s(2115),r=s(3898),o=s(4085),i=s(3348),c=s(7401);let d=(0,c.A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var m=s(4858);let u=(0,c.A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),h=(0,c.A)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),x=(0,c.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var f=s(750),p=s(7837),g=s(8095),j=s(8173),v=s.n(j);function w(e){let{open:a,onOpenChange:s,type:l,followers:r,following:o}=e,[i,c]=(0,n.useState)(l);return console.log("followers:",r),console.log("following",o),(0,t.jsx)(p.lG,{open:a,onOpenChange:s,children:(0,t.jsxs)(p.Cf,{className:"sm:max-w-[425px] md:max-w-[600px]",children:[(0,t.jsx)(p.c7,{children:(0,t.jsx)(p.L3,{className:"text-center text-xl",children:"followers"===i?"Followers":"Following"})}),(0,t.jsxs)(g.tU,{defaultValue:l,onValueChange:e=>{c(e)},children:[(0,t.jsxs)(g.j7,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(g.Xi,{value:"followers",children:"Followers"}),(0,t.jsx)(g.Xi,{value:"following",children:"Following"})]}),(0,t.jsx)(g.av,{value:"followers",className:"max-h-[60vh] overflow-auto",children:r.length?r.map(e=>(0,t.jsxs)(v(),{href:"/profile/".concat(e),className:"block py-2",children:["@",e]},e)):(0,t.jsx)("p",{className:"py-8 text-center text-muted-foreground",children:"No followers"})}),(0,t.jsx)(g.av,{value:"following",className:"max-h-[60vh] overflow-auto",children:o.length?o.map(e=>(0,t.jsxs)(v(),{href:"/profile/".concat(e),className:"block py-2",children:["@",e]},e)):(0,t.jsx)("p",{className:"py-8 text-center text-muted-foreground",children:"No following"})})]})]})})}function b(e){let{username:a,baseUrl:s}=e,[l,c]=(0,n.useState)(null),[p,g]=(0,n.useState)(!0),[j,v]=(0,n.useState)(!1),[b,y]=(0,n.useState)(!1),[N,k]=(0,n.useState)("followers"),[S,C]=(0,n.useState)([]),[A,M]=(0,n.useState)([]),F=async()=>{let e=localStorage.getItem("token");e&&(await fetch("".concat(s,"/users/follow"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({userToFollow:a})}),v(e=>!e))};return((0,n.useEffect)(()=>{let e=localStorage.getItem("token");if(!e||!a){g(!1);return}fetch("".concat(s,"/users/followInfo/").concat(a),{headers:{Authorization:"Bearer ".concat(e)}}).then(e=>e.json()).then(e=>{let{followers:a,following:s}=e;C(a.map(e=>e.follower.username)),M(s.map(e=>e.following.username))}).catch(console.error),fetch("".concat(s,"/users/user/").concat(a),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then(e=>e.json()).then(e=>{console.log(e);let a=e.dataValues?e.dataValues:e;c({name:a.name||a.username,username:a.username,bio:a.biography||"No bio provided.",location:a.location||"",website:a.website||"",joinDate:a.updatedAt?"Joined ".concat(a.updatedAt.slice(0,10)):"Joined date unknown",coverImage:a.coverImage||"/placeholder.svg?height=400&width=1200",avatar:a.avatar||"/placeholder.svg?height=150&width=150",stats:{posts:a.posts?a.posts.length:0}}),g(!1)}).catch(e=>{console.error("Error fetching profile:",e),g(!1)}),fetch("".concat(s,"/users/followingState"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({follower:localStorage.getItem("username"),following:a})}).then(e=>e.json()).then(e=>{v(e)})},[s,a]),p)?(0,t.jsx)("div",{className:"mb-6",children:"Loading profile..."}):l?(0,t.jsxs)("div",{className:"mb-6 w-full max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsx)("div",{className:"relative  md:h-[100px] rounded-t-xl overflow-hidden"}),(0,t.jsxs)("div",{className:"relative px-4 pb-4 -mt-16 md:-mt-20",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[(0,t.jsxs)(r.eu,{className:"h-32 w-32 border-4 border-background",children:[(0,t.jsx)(r.BK,{src:"https://res.cloudinary.com/".concat("dchytnqhl","/image/upload/fakeverse/").concat(l.username,".png"),alt:l.name}),(0,t.jsx)(r.q5,{children:(()=>{let e=l.name.split(" ");return e.length>1?e[0].charAt(0)+e[1].charAt(0):e[0].charAt(0)})()})]}),(0,t.jsxs)("div",{className:"mt-2 md:mt-0 md:mb-2",style:{transform:"translateY(-15px)"},children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:l.name}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:["@",l.username]})]})]}),localStorage.getItem("username")!==a?(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-4 md:mt-0",children:[(0,t.jsxs)(o.$,{variant:"outline",size:"sm",className:"h-9",children:[(0,t.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"Message"]}),(0,t.jsx)(o.$,{size:"sm",className:"h-9",variant:j?"outline":"default",onClick:F,children:j?"Following":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d,{className:"h-4 w-4 mr-2"}),"Follow"]})}),(0,t.jsxs)(f.rI,{children:[(0,t.jsx)(f.ty,{asChild:!0,children:(0,t.jsxs)(o.$,{variant:"ghost",size:"icon",className:"h-9 w-9",children:[(0,t.jsx)(m.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"More options"})]})}),(0,t.jsxs)(f.SQ,{align:"end",children:[(0,t.jsx)(f._2,{children:"Share profile"}),(0,t.jsx)(f._2,{children:"Block user"}),(0,t.jsx)(f.mB,{}),(0,t.jsx)(f._2,{className:"text-destructive",children:"Report profile"})]})]})]}):null]}),(0,t.jsxs)("div",{className:"mt-4 max-w-2xl",children:[(0,t.jsx)("p",{children:l.bio}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-2 mt-2 text-sm text-muted-foreground",children:[l.location&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(u,{className:"h-4 w-4 mr-1"}),l.location]}),l.website&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(h,{className:"h-4 w-4 mr-1"}),(0,t.jsx)("a",{href:"https://".concat(l.website),target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:l.website})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(x,{className:"h-4 w-4 mr-1"}),l.joinDate]})]})]}),(0,t.jsxs)("div",{className:"flex gap-4 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-bold",children:l.stats.posts})," ",(0,t.jsx)("span",{className:"text-muted-foreground",children:"Posts"})]}),(0,t.jsxs)("button",{onClick:()=>{k("followers"),y(!0)},className:"hover:underline",children:[(0,t.jsx)("span",{className:"font-bold",children:S.length})," ",(0,t.jsx)("span",{className:"text-muted-foreground",children:"Followers"})]}),(0,t.jsxs)("button",{onClick:()=>{k("following"),y(!0)},className:"hover:underline",children:[(0,t.jsx)("span",{className:"font-bold",children:A.length})," ",(0,t.jsx)("span",{className:"text-muted-foreground",children:"Following"})]})]})]}),(0,t.jsx)(w,{open:b,onOpenChange:y,type:N,followers:S,following:A})]}):(0,t.jsx)("div",{className:"mb-6",children:"Error loading profile."})}var y=s(6046),N=s(8491),k=s(2651);function S(e){let{baseUrl:a,username:s}=e,[l,r]=(0,n.useState)([]),[o,i]=(0,n.useState)(!0),c=e=>{r(a=>a.filter(a=>a.id!==e))};return((0,n.useEffect)(()=>{if(!s){i(!1);return}k.A.get("".concat(a,"/users/user/").concat(s),{headers:{"Content-Type":"application/json"}}).then(e=>{let a=e.data;r((a.dataValues?a.dataValues:a).posts||[]),i(!1)}).catch(e=>{console.error("Error fetching posts:",e),i(!1)})},[a,s]),o)?(0,t.jsx)("p",{children:"Loading posts..."}):0===l.length?(0,t.jsx)("p",{children:"No posts available."}):(0,t.jsx)("div",{className:"space-y-4 max-w-3xl w-full max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:l.map(e=>(0,t.jsx)(N.L,{post:e,baseUrl:a,onDelete:c},e.id))})}function C(e){let{baseUrl:a,username:s,defaultTab:l="posts"}=e,[r,o]=(0,n.useState)(l),i=(0,y.useRouter)(),c=(0,y.useSearchParams)();return(0,n.useEffect)(()=>{let e=c.get("tab");e&&e!==r&&o(e)},[c,r]),(0,t.jsx)(g.tU,{defaultValue:r,value:r,className:"w-full",onValueChange:e=>{o(e);let a=new URLSearchParams(c.toString());a.set("tab",e),i.push("/profile?".concat(a.toString()),{scroll:!1})},children:(0,t.jsx)(g.av,{value:"posts",className:"mt-6",children:(0,t.jsx)(S,{baseUrl:a,username:s})})})}function A(e){let{searchParams:a}=e,s="http://localhost:5000",n=(0,y.useParams)(),r=Array.isArray(n.username)?n.username[0]:n.username||"";return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,t.jsx)(l.Navbar,{}),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,t.jsx)(b,{username:r,baseUrl:s}),(0,t.jsx)(C,{baseUrl:s,username:r,defaultTab:"posts"})]})]})}},8095:(e,a,s)=>{"use strict";s.d(a,{tU:()=>F,av:()=>R,j7:()=>I,Xi:()=>T});var t=s(5155),l=s(2115),n=s(3610),r=s(8166),o=s(7357),i=s(7028),c=s(3360),d=s(4256),m=s(1488),u=s(7668),h="Tabs",[x,f]=(0,r.A)(h,[o.RG]),p=(0,o.RG)(),[g,j]=x(h),v=l.forwardRef((e,a)=>{let{__scopeTabs:s,value:l,onValueChange:n,defaultValue:r,orientation:o="horizontal",dir:i,activationMode:h="automatic",...x}=e,f=(0,d.jH)(i),[p,j]=(0,m.i)({prop:l,onChange:n,defaultProp:r});return(0,t.jsx)(g,{scope:s,baseId:(0,u.B)(),value:p,onValueChange:j,orientation:o,dir:f,activationMode:h,children:(0,t.jsx)(c.sG.div,{dir:f,"data-orientation":o,...x,ref:a})})});v.displayName=h;var w="TabsList",b=l.forwardRef((e,a)=>{let{__scopeTabs:s,loop:l=!0,...n}=e,r=j(w,s),i=p(s);return(0,t.jsx)(o.bL,{asChild:!0,...i,orientation:r.orientation,dir:r.dir,loop:l,children:(0,t.jsx)(c.sG.div,{role:"tablist","aria-orientation":r.orientation,...n,ref:a})})});b.displayName=w;var y="TabsTrigger",N=l.forwardRef((e,a)=>{let{__scopeTabs:s,value:l,disabled:r=!1,...i}=e,d=j(y,s),m=p(s),u=C(d.baseId,l),h=A(d.baseId,l),x=l===d.value;return(0,t.jsx)(o.q7,{asChild:!0,...m,focusable:!r,active:x,children:(0,t.jsx)(c.sG.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":h,"data-state":x?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:u,...i,ref:a,onMouseDown:(0,n.m)(e.onMouseDown,e=>{r||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(l)}),onKeyDown:(0,n.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(l)}),onFocus:(0,n.m)(e.onFocus,()=>{let e="manual"!==d.activationMode;x||r||!e||d.onValueChange(l)})})})});N.displayName=y;var k="TabsContent",S=l.forwardRef((e,a)=>{let{__scopeTabs:s,value:n,forceMount:r,children:o,...d}=e,m=j(k,s),u=C(m.baseId,n),h=A(m.baseId,n),x=n===m.value,f=l.useRef(x);return l.useEffect(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(i.C,{present:r||x,children:s=>{let{present:l}=s;return(0,t.jsx)(c.sG.div,{"data-state":x?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":u,hidden:!l,id:h,tabIndex:0,...d,ref:a,style:{...e.style,animationDuration:f.current?"0s":void 0},children:l&&o})}})});function C(e,a){return"".concat(e,"-trigger-").concat(a)}function A(e,a){return"".concat(e,"-content-").concat(a)}S.displayName=k;var M=s(9602);let F=v,I=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(b,{ref:a,className:(0,M.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...l})});I.displayName=b.displayName;let T=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(N,{ref:a,className:(0,M.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...l})});T.displayName=N.displayName;let R=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(S,{ref:a,className:(0,M.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...l})});R.displayName=S.displayName},3348:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(7401).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[822,721,628,491,441,517,358],()=>a(1197)),_N_E=e.O()}]);