exports.id=768,exports.ids=[768],exports.modules={4647:()=>{},4056:(e,s,t)=>{"use strict";t.d(s,{L:()=>w});var a=t(5512),r=t(8009),l=t(5103),n=t(1846),o=t(7021),i=t(7643),d=t(5409),c=t(9156),m=t(9462);let x=r.forwardRef(({className:e,orientation:s="horizontal",decorative:t=!0,...r},l)=>(0,a.jsx)(c.b,{ref:l,decorative:t,orientation:s,className:(0,m.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...r}));x.displayName=c.b.displayName;var u=t(2952),f=t(4494),h=t(453),p=t(1575),g=t(5607),j=t(8531),N=t.n(j),y=t(1965);function v({open:e,onOpenChange:s,title:t="Likes",likes:r}){return(0,a.jsx)(y.lG,{open:e,onOpenChange:s,children:(0,a.jsxs)(y.Cf,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(y.c7,{children:(0,a.jsx)(y.L3,{className:"text-center text-xl",children:t})}),(0,a.jsx)("div",{className:"max-h-[60vh] overflow-y-auto",children:(0,a.jsx)("div",{className:"space-y-2",children:r.length>0?r.map(e=>(0,a.jsx)(N(),{href:`/profile/${e.user.username}`,className:"block p-2 hover:bg-gray-100 rounded",children:e.user.username},e.id)):(0,a.jsx)("div",{className:"text-center py-4 text-muted-foreground",children:"No users found."})})})]})})}function w({post:e,baseUrl:s,onDelete:t}){let c=localStorage.getItem("username"),m=!!e.Likes&&!!c&&e.Likes.some(e=>e.user.username===c),[j,y]=(0,r.useState)(m),[w,b]=(0,r.useState)(!1),[k,C]=(0,r.useState)(!1),[$,S]=(0,r.useState)(""),[L,z]=(0,r.useState)(e.Likes.length),[A,E]=(0,r.useState)(!1),[R,I]=(0,r.useState)(!1),[T,B]=(0,r.useState)(null),[D,U]=(0,r.useState)(null),[F,O]=(0,r.useState)(e.Comments),[q,J]=(0,r.useState)(e.Likes),K="dchytnqhl",P=async()=>{let t=localStorage.getItem("token");if(t){try{let a=await fetch(`${s}/posts/like/${e.id}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(a.ok){let e=await a.json();j?(z(L-1),J(e=>e.filter(e=>e.user.username!==c))):(z(L+1),J([...q,e]))}else console.error("Failed to like post")}catch(e){console.error("Error liking post:",e)}y(!j)}},Z=()=>{C(!k)},W=async()=>{if(!$.trim())return;let t=localStorage.getItem("token");if(t)try{let a=await fetch(`${s}/posts/comment/${e.id}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({description:$.trim()})});if(a.ok){let e=await a.json();e.user={username:localStorage.getItem("username")||"Unknown"},O(s=>[...s,e]),S("")}else console.error("Failed to post comment")}catch(e){console.error("Error posting comment:",e)}},G=async()=>{let a=localStorage.getItem("token");if(a)try{(await fetch(`${s}/posts/${e.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}})).ok?(U("Post deleted"),setTimeout(()=>{t(e.id)},2e3)):(U("Failed to delete post"),setTimeout(()=>{U(null)},2e3))}catch(e){console.error("Error deleting post:",e),U("Failed to delete post"),setTimeout(()=>{U(null)},2e3)}},H=async e=>{let t=localStorage.getItem("token");if(t)try{(await fetch(`${s}/posts/comment/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok?O(s=>s.filter(s=>s.id!==e)):console.error("Failed to delete comment")}catch(e){console.error("Error deleting comment:",e)}};return(0,a.jsxs)(i.Zp,{className:"relative",children:[D&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 text-white text-lg font-bold z-10",children:D}),(0,a.jsx)(i.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)(N(),{href:`/profile/${e.username}`,className:"flex items-center gap-3",children:[(0,a.jsxs)(n.eu,{children:[(0,a.jsx)(n.BK,{src:`https://res.cloudinary.com/${K}/image/upload/fakeverse/${e.username}.png`,alt:e.username}),(0,a.jsx)(n.q5,{children:e.username.charAt(0).toUpperCase()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold",children:e.username}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["@",e.username," \xb7 ",e.updatedAt.slice(0,10)]})]})]}),localStorage.getItem("username")===e.username&&(0,a.jsxs)(u.rI,{children:[(0,a.jsx)(u.ty,{asChild:!0,children:(0,a.jsxs)(o.$,{variant:"ghost",size:"icon",className:"h-8 w-8",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"More options"})]})}),(0,a.jsx)(u.SQ,{align:"end",children:(0,a.jsx)(u._2,{className:"text-destructive",onClick:G,children:"Delete post"})})]})]})}),(0,a.jsxs)(i.Wu,{className:"pb-3",children:[(0,a.jsx)("p",{className:"mb-3",children:e.content}),e.image&&(0,a.jsx)("div",{className:"relative rounded-md overflow-hidden mb-3",children:(0,a.jsx)(l.default,{src:e.image||"/placeholder.svg",alt:"Post image",width:600,height:400,className:"w-full object-cover"})})]}),(0,a.jsxs)(i.wL,{className:"flex flex-col pt-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,a.jsxs)("button",{className:"flex items-center gap-1 text-muted-foreground text-sm hover:underline",onClick:()=>{E(!0)},children:[(0,a.jsx)(h.A,{className:`h-4 w-4 ${j?"fill-primary text-primary":""}`}),(0,a.jsxs)("span",{children:[L," likes"]})]}),(0,a.jsx)("div",{className:"flex items-center gap-1 text-muted-foreground text-sm",children:(0,a.jsxs)("span",{onClick:Z,children:[F.length," comments"]})})]}),(0,a.jsx)(x,{className:"my-3"}),(0,a.jsxs)("div",{className:"flex items-center justify-around w-full",children:[(0,a.jsxs)(o.$,{variant:"ghost",size:"sm",className:"flex items-center gap-1 text-muted-foreground",onClick:P,children:[(0,a.jsx)(h.A,{className:`h-4 w-4 ${j?"fill-primary text-primary":""}`}),"Like"]}),(0,a.jsxs)(o.$,{variant:"ghost",size:"sm",className:"flex items-center gap-1 text-muted-foreground",onClick:Z,children:[(0,a.jsx)(p.A,{className:"h-4 w-4"}),"Comment"]})]}),k&&(0,a.jsxs)("div",{className:"w-full mt-3 space-y-3",children:[(0,a.jsx)(x,{}),F.map(e=>{let s=e.user?.username||localStorage.getItem("username")||"Unknown",t=e.user?.username?e.user.username.charAt(0).toUpperCase():"U";return(0,a.jsxs)("div",{className:"flex items-start gap-2 pt-3 relative",children:[(0,a.jsx)(N(),{href:`/profile/${e.user.username}`,children:(0,a.jsxs)(n.eu,{className:"h-8 w-8",children:[(0,a.jsx)(n.BK,{src:`https://res.cloudinary.com/${K}/image/upload/fakeverse/${e.user.username}.png`,alt:s}),(0,a.jsx)(n.q5,{children:t})]})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"bg-muted p-2 rounded-md relative",children:[localStorage.getItem("username")===e.user?.username&&(0,a.jsx)("button",{onClick:()=>H(e.id),className:"absolute top-1 right-1 text-xs text-red-500 hover:underline",children:"Delete"}),(0,a.jsx)(N(),{href:`/profile/${e.user.username}`,className:"font-semibold text-sm",children:s}),(0,a.jsx)("p",{className:"text-sm",children:e.description})]}),(0,a.jsx)("div",{className:"flex items-center gap-2 mt-1 text-xs text-muted-foreground",children:(0,a.jsx)("span",{children:e.createdAt.slice(0,10)})})]})]},e.id)}),(0,a.jsxs)("div",{className:"flex items-center gap-2 pt-3",children:[(0,a.jsxs)(n.eu,{className:"h-8 w-8",children:[(0,a.jsx)(n.BK,{src:`https://res.cloudinary.com/${K}/image/upload/fakeverse/${localStorage.getItem("username")}.png`,alt:"@user"}),(0,a.jsx)(n.q5,{children:"JD"})]}),(0,a.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,a.jsx)(d.p,{placeholder:"Write a comment...",value:$,onChange:e=>S(e.target.value),className:"flex-1",onKeyDown:e=>{"Enter"===e.key&&W()}}),(0,a.jsxs)(o.$,{size:"icon",variant:"ghost",onClick:W,disabled:!$.trim(),children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Send comment"})]})]})]})]})]}),(0,a.jsx)(v,{open:A,onOpenChange:E,title:"Likes",likes:q})]})}},7643:(e,s,t)=>{"use strict";t.d(s,{BT:()=>d,Wu:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>o,wL:()=>m});var a=t(5512),r=t(8009),l=t(9462);let n=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));n.displayName="Card";let o=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...s}));o.displayName="CardHeader";let i=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));i.displayName="CardTitle";let d=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let c=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent";let m=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",e),...s}));m.displayName="CardFooter"},1965:(e,s,t)=>{"use strict";t.d(s,{Cf:()=>m,L3:()=>u,c7:()=>x,lG:()=>i});var a=t(5512),r=t(8009),l=t(7553),n=t(4269),o=t(9462);let i=l.bL;l.l9;let d=l.ZL;l.bm;let c=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.hJ,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));c.displayName=l.hJ.displayName;let m=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(d,{children:[(0,a.jsx)(c,{}),(0,a.jsxs)(l.UC,{ref:r,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[s,(0,a.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=l.UC.displayName;let x=({className:e,...s})=>(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});x.displayName="DialogHeader";let u=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));u.displayName=l.hE.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",e),...s})).displayName=l.VY.displayName}};